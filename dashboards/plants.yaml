decluttering_templates:
  plant_overview:
    variables:
      - plant_place: Left
      - pot_number: left
    card:
      type: "custom:vertical-stack-in-card"
      title: "Pot [[pot_number]]"
      cards:
        - type: glance
          entities:
            - entity: "sensor.plant_[[pot_number]]_age_in_days"
              name: Since Planting
            - entity: "sensor.plant_[[pot_number]]_age_in_weeks"
              name: ""
            - entity: "input_number.plant_[[pot_number]]_harvest_age"
              icon: mdi:calendar-check
              name: Harvest
        - type: glance
          entities:
            - entity: "input_datetime.plant_[[pot_number]]_planting_date"
              name: Planting Date
            - entity: "input_text.plant_[[pot_number]]_name"
              icon: mdi:flower
              name: Type
            - entity: "input_boolean.plant_[[pot_number]]_big_pot"
              icon: mdi:pot
              name: Big Pot
title: Plants
views:
  - title: Overview
    path: overview
    type: custom:horizontal-layout
    layout:
      max_cols: 3
    cards:
      - type: "custom:vertical-stack-in-card"
        title: General
        view_layout:
          column: 1
        cards:
          - type: glance
            entities:
              - entity: sensor.kitchen_mqtt_lcd_display_humidity
                name: Humidity
              - entity: sensor.kitchen_mqtt_lcd_display_temperature
                name: Temperature
                show_name: true
          - type: glance
            entities:
              - entity: sensor.plant_closet_master_switch_power_in_watt
                name: Energy Consumption
              - entity: sensor.kitchen_sensor_temperature
                name: Kitchen Temperature
          - type: "custom:stack-in-card"
            mode: horizontal
            title: Switches
            cards:
              - type: button
                entity: switch.hue_smart_plug_3
                icon_height: 40px
                name: Small Light
                style: |
                  ha-card {
                  margin-top: -10px;
                  margin-bottom: 0px;
                  }
              - type: button
                entity: switch.hue_smart_plug_1
                icon_height: 40px
                name: Big Light
                style: |
                  ha-card {
                  margin-top: -10px;
                  margin-bottom: 0px;
                  }
              - type: button
                icon_height: 40px
                entity: switch.hue_smart_plug_2
                name: Ventilation
                style: |
                  ha-card {
                  margin-top: -10px;
                  margin-bottom: 0px;
                  }
          - type: custom:fold-entity-row
            head:
              type: section
              label: Automations
            open: false
            entities:
              - type: "custom:fold-entity-row"
                head:
                  entity: input_boolean.kitchen_plant_light_automation_enabled
                  name: Plant Light Automation
                entities:
                  - name: Turn On Time
                    entity: input_datetime.kitchen_plant_light_turn_on_time
                  - name: Turn Off Time
                    entity: input_datetime.kitchen_plant_light_turn_off_time
              - type: "custom:fold-entity-row"
                head:
                  entity: input_boolean.kitchen_lcd_display_rotation_enabled
                  name: Plant Status Display Rotation
                entities:
                  - name: Rotation Timeout
                    entity: input_number.lcd_display_rotation_timeout
              - type: "custom:fold-entity-row"
                head:
                  entity: input_boolean.kitchen_plant_ventilation_automation_enabled
                  name: Night Time Plant Ventilation
                entities:
                  - name: On Interval
                    entity: input_number.kitchen_plant_night_ventilation_on_interval
                    type: custom:slider-entity-row
                  - name: Off Interval
                    entity: input_number.kitchen_plant_night_ventilation_off_interval
                    type: custom:slider-entity-row
                  - name: Start Time
                    entity: input_datetime.kitchen_plant_night_ventilation_turn_on_time
              - type: divider
              - type: "custom:fold-entity-row"
                head:
                  entity: binary_sensor.temperature_too_hot_in_plant_closet
                  name: Temperature over alarm threshold
                entities:
                  - entity: input_number.kitchen_plant_closet_maximum_temperature
                    name: Warning Temperature
                  - entity: input_number.kitchen_plant_closet_maximum_temperature_notification_timeout
                    name: Notification Timeout
                  - entity: input_number.kitchen_plant_closet_release_temp_alarm_timeout
                    name: Release Alarm Timeout
      - type: custom:decluttering-card
        template: plant_overview
        view_layout:
          column: 2
        variables:
          - pot_number: 1
      - type: custom:decluttering-card
        template: plant_overview
        view_layout:
          column: 3
        variables:
          - pot_number: 2
      - type: custom:decluttering-card
        template: plant_overview
        view_layout:
          column: 2
        variables:
          - pot_number: 3
      - type: custom:decluttering-card
        template: plant_overview
        view_layout:
          column: 3
        variables:
          - pot_number: 4
      - type: custom:decluttering-card
        template: plant_overview
        view_layout:
          column: 2
        variables:
          - pot_number: 5
      - type: custom:decluttering-card
        template: plant_overview
        view_layout:
          column: 3
        variables:
          - pot_number: 6
  - title: Harvest
    path: harvest
    type: custom:horizontal-layout
    layout:
      max_cols: 3
    cards:
      - type: "custom:vertical-stack-in-card"
        title: General
        view_layout:
          column: 1
        cards:
          - type: glance
            entities:
              - entity: sensor.plant_closet_harvest
                name: Overall Harvest
              - entity: sensor.plant_closet_plants_harvested
                name: Plants
      - type: custom:flex-table-card
        title: Harvests
        entities:
          include: sensor.plant_closet_harvest
        columns:
          - name: Plant
            data: harvests
            modify: x["type"]
          - name: Date
            data: harvests
            modify: x["date"]
          - name: Amount
            data: harvests
            modify: x["amount"]
  - title: Graphs
    path: graphs
    panel: false
    cards:
      - type: custom:layout-card
        layout:
          grid-template-columns: 600px
          grid-template-rows: auto
          grid-template-areas: |
            "header"
            "main"
            "footer"
          mediaquery:
            "(max-width: 600px)":
              grid-template-columns: 100%
              grid-template-areas: |
                "header"
                "main"
                "footer"
        cards:
          - type: "custom:stack-in-card"
            mode: vertical
            title: Graphs
            cards:
              - type: custom:apexcharts-card
                graph_span: 2d
                header:
                  show: true
                  title: Plant Closet Temperature
                  show_states: true
                  colorize_states: true
                series:
                  - entity: sensor.kitchen_mqtt_lcd_display_temperature
                    name: Temperature in Â°C
                    color: blue
                view_layout:
                  grid-area: header
              - type: custom:apexcharts-card
                graph_span: 2d
                header:
                  show: true
                  title: Plant Closet Humidity
                  show_states: true
                  colorize_states: true
                series:
                  - entity: sensor.kitchen_mqtt_lcd_display_humidity
                    name: Humidity in %
                    color: blue
                view_layout:
                  grid-area: main
              - type: custom:apexcharts-card
                graph_span: 2d
                header:
                  show: true
                  title: Plant Power Consumption
                  show_states: true
                  colorize_states: true
                series:
                  - entity: sensor.plant_closet_master_switch_power_in_watt
                    name: Power in W
                    color: blue
                view_layout:
                  grid-area: main
